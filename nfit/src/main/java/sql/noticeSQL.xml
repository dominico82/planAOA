<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="nfit.notice">
	<select id="getNoticeList" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		SELECT * FROM 
			(SELECT ROW_NUMBER() OVER(ORDER BY notice_idx DESC) 
					notice_idx,
					notice_subject,
					nocitce_content,
					notice_top,
					notice_event,
					notice_date
			FROM notice_bbs ) X WHERE X.RNUM BETWEEN #{first} AND #{last}

	</select>
	<select id="totalCnt" resultType="Integer">
		select count(*) from notice_bbs
	</select>
	<select id="getNoticeContents" resultType="nfit.notice.model.NoticeDTO">
		select * from notice_bbs where notice_idx = #{notice_idx}
	</select>
	<insert id="setNoticeContents" parameterType="nfit.notice.model.NoticeDTO">
		insert into 
			notice_bbs
		values(
			notice_bbs_idx.nextval,
			#{notice_subject},
			#{notice_content},
			#{notice_top},
			#{notice_event},
			sysdate
		)
	</insert>	
	<insert id="setNoticePics" parameterType="String">
		insert into
			pic_table
		values(
			pic_table_idx.nextval,
			notice_bbs_idx.currval,
			0,
			#{pic_name}
		)			
	</insert>
	<select id="getNoticePics" resultType="String">
		select pic_name from pic_table 
			where notice_idx=#{notice_idx}  
	</select>
</mapper>